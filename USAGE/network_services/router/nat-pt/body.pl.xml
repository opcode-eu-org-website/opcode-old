<article>
<title>NAT-PT czyli brama pomiędzy IPv6 a IPv4</title>

<p>Przynajmniej w okresie przejściowym wdrażania IPv6 konieczne może się okazać zapewnienie sieci IPv6-only dostępu do zasobów sieci IPv4. W tym celu stosuje się rozwiązania typu <wiki en="IPv6 transition mechanism">NAT-PT</wiki>, wykonujące translację adresów pomiędzy IPv6 i IPv4. W odróżnieniu od zwykłych NATów muszą one także podmieniać zapytania i odpowiedzi DNS tak aby mapować adres IPv4 hosta docelowego w przestrzeni adresowej IPv6 i zwracać ten zamapowany adres jako odpowiedź na rządanie AAAA.</p>

<p>Przykładem realizacji takiego mechanizmu jest daemon (mechanizm ten - chyba nawet w BSD oferującym w odróżnieniu od Linuxa NAT dla IPv6 - realizowany jest poza jądrem systemu) <homepage url="http://www.lucastomicki.net/naptd.php">naptd</homepage>. Instalacja i konfiguracja jest szczegółowo opisana w załączonej dokumentacji. Należy jednak zwrócić uwagę blokadę przekazywania prefixu używanego przez NAT-PT na routerach IPv6 - <code>ip6tables -I FORWARD 1 -d 2000:ffff::/96 -j DROP</code> (na wszystkich routerach dających wyjście na świat po ipv6) oraz odrzucanie pakietów innych niż ESTABLISHED oraz NEW na uruchomione usługi (ptrzedewszystkim ssh) na routerze robiącym NAT-PT. Na hostach klienckich należy z koleji ustawić trasę routingu dla sieci wykorzystywanej przez NAT-pT - <code>ip -6 route add 2000:ffff::/96 via ipv6:hosta:robiacego:nat::pt dev eth0</code> oraz ustawić DNS będący adresem DNSu IPv6 zamapowanym na adres IPv6 urzywany przez NAT-PT (2000:ffff::ip.ip.dns.v4). Zamieszczam też <a class="int" href="./naptd.diff">łatkę</a> na wersję 0.4 umożliwiającą skompilowanie jej pod Debianem Lenny.</p>
</article>
