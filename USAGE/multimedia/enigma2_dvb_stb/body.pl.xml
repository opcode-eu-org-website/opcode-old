<article>
<title>DVB STB: Enigma2</title>

<p>Enigma2 jest popularną aplikacją realizującą funkcjonalność dekodera telewizji cyfrowej w rozwiązaniach STB (set top box) opartych na Linuxie. Zajmuje się ona zarówno samą obsługą linuxowych urządzeń DVB - <kbd class="path">/dev/dvb/adapert*/*</kbd> (czyli przełączaniem kanałów, źródeł sygnału, nagrywaniem sygnału kierowaniem go na wyjście wizyjne (np. HDMI) urządzenia), jak również obsługą GUI i wszelkich jego "feature'ów". Rdzeń aplikacji napisany jest w C++, natomiast elementy interfejsu użytkownika oraz różnego rodzaju rozszerzenia kodowane są w Pythonie.</p>
   
<p>Niestety w aplikacji nie został zastosowany podział na frontend (realizujący GUI) i backend (odpowiedzialny za obsługę DVB), efektem tego jest m.in. to że drobne błędy w GUI prowadzą do restartu całej aplikacji (i np. przerwania trwających nagrań). W porównaniu z innymi projektami FLOSS (Enigma2 korzysta z licencji GPL) także rozwój projektu jest dziwny - projekt jako taki nie ma zasadniczo strony domowej, głównego repozytorium kodu, ani niczego w tym stylu - rozwijany jest jako zestaw forków, utrzymywanych w ramach poszczególnych dystrybucji oprogramowania dla STB, które od czasu do czasu wymieniają pomiędzy sobą fragmenty kodu. Wygląda to tak jakby Linux nie miał swojego repozytorium kodu, struktur projektu, itd, zamiast tego każda dystrybucja miałaby własne repozytorium kodu jądra i od czasu do czasy wymieniała kod z innymi dystrybucjami. Nie udało mi się również nigdzie odnaleźć dokumentacji pythonowego API enigmy. W przypadku dystrybucji enigmy zauważalne jest dość luźne (przynajmniej z punktu 
widzenia użytkownika Debiana) podejście do zagadnień licencyjnych - np. wiele z pluginów enigmy nie ma w ogóle określonej licencji (jest tylko kod w jakimś repozytorium), bardzo duża część ma licencje CC "non-comercial" (a pomimo tego znajdują się w dystrybucjach które są preinstalowane w sprzedawanych urządzeniach).</p>

<p>Poniższe opisy bazują na moich doświadczeniach z Enigmą2 pochodzący z dystrybucji <homepage url="http://www.opena.tv/">OpenATV</homepage> oraz urządzeniu Golden Interstar Xpeed LX3 (ten sam sprzęt występuje także pod nazwami "Sezam Marvel" i "inihdp"). Ogólną strukturę urządzeń DVB w tym urządzeniu można przedstawić w sposób następujący: <br /><img_from_src name="xpeedlx3-linux-dvb" type="dia" alt="Struktura urządzeń DVB w Xpeed LX3" /></p>

<p>Jako że OpenATV (dystrybucja Linuxa z Enigmą oparta, jak większość podobnych, na managerze pakietów ipkg/opkg) nie udostępnia pakietów deweloperskich, a cross-kompilacja (zwłaszcza na system dla którego nie mamy bibliotek w wersjach deweloperskich) bywa uciążliwa, a zasoby STB na to pozwalają to do kompilacji postanowiłem wykorzystać Debiana działającego w chroocie. Instalacja Debiana wykonana została poprzez debootstrap - pierwszy etap (z opcją <code>--foreign</code>) na PC, przekopiowanie tar-em na HDD STB i tam w chroocie drugi etap debootstrapem (opcja <code>--second-stage</code>).</p>

</article>
